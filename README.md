# tg_bot_factorio
tg_bot_factorio — это проект, созданный для запуска сервера Factorio на операционной системе Linux в качестве пользовательской службы systemd. Кроме того, он устанавливает Telegram-бота, который обеспечивает удобное управление сервером, а также позволяет отправлять команды на консоль сервера с помощью протокола RCON.


# Установка вариант 1 SH
- Клонируйте этот репозиторий на машину, где будет хостится сервер и бот.
- Запустите скрипт `script_install.sh`
- Введите зарпашиваемые данные. Среди них есть токен телеграмм бота. Его можно получить, создав нового бота или сгенерировав новый токен у [BotFather](https://telegram.me/BotFather).
- Для запуска бота запустите скрипт `start_bot.sh`
- Бот работает и принимает команды через телеграм.
- Если необходимо изменить введенный ранее параметр, то отредактируйте файл data/parameters.txt

# Установка\обновление вариант 2 Ansible
- Клонируйте этот репозиторий к себе в папку `/home/$USER/factorio/`
- Установите `pip` и `pipx` `apt-get install pip -y` и `pip install pipx -y`
- Установите `Ansible` с помощью команды `pipx install --include-deps ansible`
- Перейдите в папку playbook и запустите команду `ansible-playbook -i host.txt main.yaml --ask-pass`, ввести токен и `RCON` пароль
- Для установки\обновления сервера необходимой версии заменить версию на нужную в `playbook/group_vars/all.yaml`


# Команды для управления сервером

`/start_server` - запускает сервер  
`/stop_server` - останавливает сервер  
`/status_server` - выводит статус сервер  

# Команды `RCON`  для отправки сообщений на сервер `Factorio`

`/send_text` - отправляет сообщение на сервер  
`/players` - выводит игроков на сервере    
`/server-save` - сервер выполняет сохранение мира    
